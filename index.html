<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vidnex | Ultimate Student Ecosystem</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* --- CORE STYLES --- */
        :root {
            --primary: #6C63FF;
            --secondary: #2A2A72;
            --accent: #009FFD;
            --bg: #F4F7F6;
            --white: #ffffff;
            --text: #333;
            --gold: #FFD700;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: var(--bg); color: var(--text); overflow-x: hidden; }
        
        /* --- UTILITIES --- */
        .hidden { display: none !important; }
        .btn { padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; transition: 0.2s; display: inline-flex; align-items: center; gap: 8px; justify-content: center; }
        .btn:hover { transform: translateY(-2px); }
        .btn-primary { background: var(--primary); color: white; }
        .btn-secondary { background: var(--secondary); color: white; }
        .btn-elite { background: linear-gradient(135deg, #FFD700, #FDB931); color: black; }
        .btn-danger { background: #ff4757; color: white; }
        
        .card { background: var(--white); border-radius: 16px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); transition: 0.3s; position: relative; }
        .card:hover { transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
        
        input, select, textarea { width: 100%; padding: 12px; margin: 8px 0; border: 1px solid #ddd; border-radius: 8px; outline: none; }
        
        /* --- NAVBAR & PROFILE DROPDOWN --- */
        .navbar { display: flex; justify-content: space-between; align-items: center; padding: 15px 5%; background: white; box-shadow: 0 2px 10px rgba(0,0,0,0.05); position: sticky; top: 0; z-index: 100; }
        .logo { font-size: 24px; font-weight: 900; color: var(--secondary); }
        .logo span { color: var(--primary); }
        
        .profile-container { position: relative; cursor: pointer; }
        .profile-pic { width: 45px; height: 45px; border-radius: 50%; background: var(--primary); color: white; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem; }
        .dropdown-menu { position: absolute; top: 55px; right: 0; background: white; width: 150px; border-radius: 8px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); display: none; flex-direction: column; overflow: hidden; }
        .dropdown-menu.show { display: flex; }
        .dropdown-item { padding: 12px; text-decoration: none; color: #333; transition: 0.2s; cursor: pointer; }
        .dropdown-item:hover { background: #f0f0f0; }

        /* --- DASHBOARD GRID --- */
        .dash-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; padding: 25px; max-width: 1200px; margin: 0 auto; }
        
        /* --- ELITE & VERIFIED --- */
        .verified-badge { color: #1DA1F2; margin-left: 5px; display: none; }
        .is-elite .verified-badge { display: inline-block; }
        
        /* --- AI CHAT --- */
        #chat-box { height: 350px; overflow-y: auto; background: #f9f9f9; padding: 15px; border-radius: 10px; margin-bottom: 10px; display: flex; flex-direction: column; gap: 10px; }
        .msg { padding: 10px 15px; border-radius: 15px; max-width: 80%; font-size: 0.95rem; }
        .msg.user { align-self: flex-end; background: var(--primary); color: white; }
        .msg.ai { align-self: flex-start; background: white; border: 1px solid #eee; }

        /* --- ELITE TOOLS GRID --- */
        .tools-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; margin-top: 20px; }
        .tool-card { background: #f8f9fa; padding: 15px; border-radius: 12px; text-align: center; cursor: pointer; transition: 0.2s; border: 1px solid #eee; }
        .tool-card:hover { background: white; border-color: var(--primary); transform: scale(1.05); }
        .tool-icon { font-size: 24px; color: var(--primary); margin-bottom: 8px; }

        /* --- MODALS (For Tools) --- */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 200; display: flex; align-items: center; justify-content: center; }
        .modal-content { background: white; padding: 25px; border-radius: 15px; width: 90%; max-width: 400px; text-align: center; }

        /* --- CALCULATOR --- */
        .calc-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-top: 10px; }
        .calc-btn { padding: 15px; font-size: 1.2rem; background: #eee; border-radius: 5px; border: none; cursor: pointer; }
        .calc-btn.op { background: var(--primary); color: white; }
    </style>
</head>
<body>

    <nav class="navbar" id="main-nav">
        <div class="logo">Vid<span>nex</span></div>
        <div id="auth-buttons">
            <button class="btn btn-primary" onclick="showPage('signup-page')">Get Started</button>
        </div>
        <div id="profile-area" class="profile-container hidden" onclick="toggleDropdown()">
            <div class="profile-pic" id="nav-initial">U</div>
            <div class="dropdown-menu" id="profile-dropdown">
                <div class="dropdown-item" onclick="showPage('profile-page')"><i class="fas fa-user"></i> My Profile</div>
                <div class="dropdown-item" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</div>
            </div>
        </div>
    </nav>

    <section id="landing-page" style="text-align: center; padding: 50px 20px;">
        <h1 style="font-size: 3rem; margin-bottom: 10px;">The Future of Learning</h1>
        <p style="font-size: 1.2rem; color: #666; margin-bottom: 30px;">AI Tutoring, Tools, and Elite Resources for Class 9-10.</p>
        <button class="btn btn-primary btn-lg" onclick="showPage('signup-page')">Join Vidnex Now</button>
    </section>

    <section id="signup-page" class="hidden" style="max-width: 400px; margin: 50px auto;">
        <div class="card">
            <h2>Create Account</h2>
            <form onsubmit="handleSignup(event)">
                <input type="text" id="s-name" placeholder="Full Name" required>
                <input type="email" id="s-email" placeholder="Email" required>
                <input type="password" id="s-pass" placeholder="Password" required>
                <button class="btn btn-primary" style="width: 100%;">Create Account</button>
            </form>
            <p style="text-align: center; margin-top: 10px; cursor: pointer;" onclick="showPage('login-page')">Login instead</p>
        </div>
    </section>

    <section id="login-page" class="hidden" style="max-width: 400px; margin: 50px auto;">
        <div class="card">
            <h2>Welcome Back</h2>
            <form onsubmit="handleLogin(event)">
                <input type="email" id="l-email" placeholder="Email" required>
                <input type="password" id="l-pass" placeholder="Password" required>
                <button class="btn btn-primary" style="width: 100%;">Login</button>
            </form>
        </div>
    </section>

    <section id="dashboard-page" class="hidden">
        <div style="text-align: center; padding: 20px;">
            <h2 id="greet-user">Hello, Student!</h2>
            <p>Your learning command center.</p>
        </div>

        <div class="dash-grid">
            
            <div class="card" style="text-align: center;">
                <h3>üî• Streak</h3>
                <h1 style="font-size: 3rem; color: orange;" id="streak-num">0</h1>
                <p>Days Active</p>
            </div>

            <div class="card">
                <h3>‚úÖ Daily Tasks</h3>
                <div style="display: flex; gap: 5px; margin-top: 10px;">
                    <input type="text" id="todo-input" placeholder="New task...">
                    <button class="btn btn-primary" onclick="addTodo()">+</button>
                </div>
                <ul id="todo-list" style="list-style: none; margin-top: 10px; max-height: 150px; overflow-y: auto;"></ul>
            </div>

            <div class="card" style="background: linear-gradient(45deg, #6C63FF, #5a54cc); color: white;">
                <h3>ü§ñ Vidnex AI</h3>
                <p>Ask anything about Class 9 Math, Science, or English.</p>
                <button class="btn" style="background: white; color: var(--primary); margin-top: 10px;" onclick="showPage('ai-page')">Open Chat</button>
            </div>

            <div class="card">
                <h3>üìö Study Hub</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px;">
                    <button class="btn btn-secondary" onclick="showPage('formula-page')">Formulas</button>
                    <button class="btn btn-outline" onclick="showPage('mcq-page')">MCQ Quiz</button>
                </div>
            </div>

            <div class="card">
                <h3>üßÆ Calculator</h3>
                <p>Solve quick math problems.</p>
                <button class="btn btn-outline" style="margin-top: 10px;" onclick="openTool('calc')">Open Calculator</button>
            </div>

            <div class="card" id="elite-card" style="border: 2px solid gold;">
                <h3 style="color: goldenrod;">üëë Elite Features</h3>
                <div id="elite-locked">
                    <p>Unlock 15+ Premium Tools, Blue Tick & More.</p>
                    <button class="btn btn-elite" style="width: 100%; margin-top: 10px;" onclick="activateElite()">Upgrade Free</button>
                </div>
                <div id="elite-unlocked" class="hidden">
                    <p>You are an Elite Member!</p>
                    <button class="btn btn-elite" style="width: 100%; margin-top: 10px;" onclick="showPage('elite-tools-page')">Access 15+ Tools</button>
                </div>
            </div>
        </div>
    </section>

    <section id="ai-page" class="hidden" style="max-width: 800px; margin: 20px auto; padding: 0 20px;">
        <button class="btn" onclick="showPage('dashboard-page')">‚¨Ö Back</button>
        <div class="card" style="margin-top: 20px;">
            <div style="border-bottom: 1px solid #eee; padding-bottom: 10px; margin-bottom: 10px;">
                <h3><i class="fas fa-robot"></i> Vidnex AI Tutor</h3>
            </div>
            <div id="chat-box">
                <div class="msg ai">Hello! I am your AI Tutor. Ask me any doubt!</div>
            </div>
            <div style="display: flex; gap: 10px;">
                <input type="text" id="ai-input" placeholder="Type your question..." onkeypress="if(event.key==='Enter') sendAI()">
                <button class="btn btn-primary" onclick="sendAI()"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </section>

    <section id="formula-page" class="hidden" style="max-width: 800px; margin: 20px auto; padding: 20px;">
        <button class="btn" onclick="showPage('dashboard-page')">‚¨Ö Back</button>
        <h2>Math Formulas</h2>
        <div class="dash-grid">
            <div class="card">
                <h4>Algebra</h4>
                <p>(a+b)¬≤ = a¬≤ + 2ab + b¬≤</p>
                <p>(a-b)¬≤ = a¬≤ - 2ab + b¬≤</p>
                <p>a¬≤-b¬≤ = (a-b)(a+b)</p>
            </div>
            <div class="card">
                <h4>Surface Area</h4>
                <p>Cube: 6a¬≤</p>
                <p>Cuboid: 2(lb+bh+hl)</p>
                <p>Sphere: 4œÄr¬≤</p>
            </div>
        </div>
    </section>

    <section id="mcq-page" class="hidden" style="max-width: 600px; margin: 20px auto; padding: 20px;">
        <button class="btn" onclick="showPage('dashboard-page')">‚¨Ö Back</button>
        <div class="card" style="margin-top: 20px;">
            <h3>Science Quiz</h3>
            <p style="margin: 10px 0;">Q1: What is the powerhouse of the cell?</p>
            <button class="btn btn-outline" style="width: 100%; margin-bottom: 5px; text-align: left;" onclick="alert('Wrong!')">A. Nucleus</button>
            <button class="btn btn-outline" style="width: 100%; margin-bottom: 5px; text-align: left;" onclick="alert('Correct! ‚úÖ')">B. Mitochondria</button>
            <button class="btn btn-outline" style="width: 100%; margin-bottom: 5px; text-align: left;" onclick="alert('Wrong!')">C. Ribosome</button>
        </div>
    </section>

    <section id="profile-page" class="hidden" style="max-width: 600px; margin: 20px auto; padding: 20px;">
        <button class="btn" onclick="showPage('dashboard-page')">‚¨Ö Back</button>
        <div class="card" style="margin-top: 20px; text-align: center;">
            <div style="width: 80px; height: 80px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; margin: 0 auto;" id="profile-initial-big">U</div>
            <h2 id="profile-name" style="margin-top: 10px;">User Name <i class="fas fa-check-circle verified-badge"></i></h2>
            <p id="profile-email" style="color: #666;">user@gmail.com</p>
            <div style="margin-top: 20px; padding: 10px; background: #f0f0f0; border-radius: 8px;">
                <strong>Membership:</strong> <span id="profile-plan">Free</span>
            </div>
            <button class="btn btn-danger" style="margin-top: 20px;" onclick="logout()">Logout</button>
        </div>
    </section>

    <section id="elite-tools-page" class="hidden" style="max-width: 1000px; margin: 20px auto; padding: 20px;">
        <button class="btn" onclick="showPage('dashboard-page')">‚¨Ö Back to Dashboard</button>
        <h2 style="margin-top: 20px;">üëë Elite Tools Collection</h2>
        <div class="tools-grid">
            <div class="tool-card" onclick="openTool('pomodoro')"><div class="tool-icon">‚è±Ô∏è</div>Pomodoro</div>
            <div class="tool-card" onclick="openTool('flashcard')"><div class="tool-icon">üóÇÔ∏è</div>Flashcards</div>
            <div class="tool-card" onclick="openTool('bmi')"><div class="tool-icon">‚öñÔ∏è</div>BMI Calc</div>
            <div class="tool-card" onclick="openTool('passgen')"><div class="tool-icon">üîê</div>Pass Gen</div>
            <div class="tool-card" onclick="openTool('notes')"><div class="tool-icon">üìù</div>Quick Notes</div>
            <div class="tool-card" onclick="openTool('coin')"><div class="tool-icon">ü™ô</div>Toss Coin</div>
            <div class="tool-card" onclick="openTool('dice')"><div class="tool-icon">üé≤</div>Roll Dice</div>
            <div class="tool-card" onclick="openTool('breathing')"><div class="tool-icon">üßò</div>Breathing</div>
            <div class="tool-card" onclick="openTool('quote')"><div class="tool-icon">üí¨</div>Daily Quote</div>
            <div class="tool-card" onclick="openTool('stopwatch')"><div class="tool-icon">‚è≤Ô∏è</div>Stopwatch</div>
            <div class="tool-card" onclick="openTool('tts')"><div class="tool-icon">üó£Ô∏è</div>Text to Speech</div>
            <div class="tool-card" onclick="openTool('converter')"><div class="tool-icon">üîÑ</div>Unit Converter</div>
            <div class="tool-card" onclick="openTool('counter')"><div class="tool-icon">üî¢</div>Word Counter</div>
            <div class="tool-card" onclick="openTool('bg')"><div class="tool-icon">üé®</div>Color Picker</div>
            <div class="tool-card" onclick="alert('Coming soon in next update!')"><div class="tool-icon">üìÖ</div>Planner</div>
        </div>
    </section>

    <div id="tool-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <h3 id="modal-title">Tool</h3>
            <div id="modal-body" style="margin: 20px 0;"></div>
            <button class="btn btn-secondary" onclick="closeTool()">Close</button>
        </div>
    </div>

    <script>
        // --- 1. CONFIG & AUTH ---
        const API_KEY = "AIzaSyChDvQpOXmgdPvn-oTcFZx_YpsUMEjBZ0Q"; // User provided key
        
        // Navigation Logic
        function showPage(pageId) {
            document.querySelectorAll('section').forEach(sec => sec.classList.add('hidden'));
            document.getElementById(pageId).classList.remove('hidden');
            window.scrollTo(0,0);
        }

        // Dropdown Logic
        function toggleDropdown() {
            document.getElementById('profile-dropdown').classList.toggle('show');
        }

        // Mock Auth
        function handleSignup(e) {
            e.preventDefault();
            const name = document.getElementById('s-name').value;
            const email = document.getElementById('s-email').value;
            const user = { name, email, plan: 'Free', streak: 1, todos: [] };
            localStorage.setItem('vidUser', JSON.stringify(user));
            alert("Account Created!");
            loadDashboard();
        }

        function handleLogin(e) {
            e.preventDefault();
            if(localStorage.getItem('vidUser')) {
                loadDashboard();
            } else {
                alert("No account found.");
            }
        }

        function logout() {
            if(confirm("Logout?")) {
                document.getElementById('main-nav').querySelector('#auth-buttons').classList.remove('hidden');
                document.getElementById('profile-area').classList.add('hidden');
                showPage('landing-page');
            }
        }

        // --- 2. DASHBOARD LOGIC ---
        function loadDashboard() {
            const user = JSON.parse(localStorage.getItem('vidUser'));
            
            // Update Navigation
            document.getElementById('auth-buttons').classList.add('hidden');
            document.getElementById('profile-area').classList.remove('hidden');
            document.getElementById('nav-initial').innerText = user.name.charAt(0);
            
            // Update Dashboard Text
            document.getElementById('greet-user').innerHTML = `Hi, ${user.name.split(' ')[0]} <i class="fas fa-check-circle verified-badge"></i>`;
            document.getElementById('streak-num').innerText = user.streak;
            
            // Update Profile Page Data
            document.getElementById('profile-initial-big').innerText = user.name.charAt(0);
            document.getElementById('profile-name').innerHTML = `${user.name} <i class="fas fa-check-circle verified-badge"></i>`;
            document.getElementById('profile-email').innerText = user.email;
            document.getElementById('profile-plan').innerText = user.plan;

            // Check Elite Status
            if(user.plan === 'Elite') {
                document.body.classList.add('is-elite');
                document.getElementById('elite-locked').classList.add('hidden');
                document.getElementById('elite-unlocked').classList.remove('hidden');
            }

            renderTodos(user.todos);
            showPage('dashboard-page');
        }

        // --- 3. TO-DO LOGIC ---
        function addTodo() {
            const val = document.getElementById('todo-input').value;
            if(!val) return;
            const user = JSON.parse(localStorage.getItem('vidUser'));
            user.todos.push(val);
            localStorage.setItem('vidUser', JSON.stringify(user));
            document.getElementById('todo-input').value = "";
            renderTodos(user.todos);
        }

        function renderTodos(todos) {
            const list = document.getElementById('todo-list');
            list.innerHTML = "";
            todos.forEach((t, i) => {
                list.innerHTML += `<li style="padding: 5px 0; border-bottom: 1px solid #eee; display:flex; justify-content:space-between;">
                    ${t} <span onclick="removeTodo(${i})" style="color:red; cursor:pointer;">&times;</span>
                </li>`;
            });
        }

        function removeTodo(index) {
            const user = JSON.parse(localStorage.getItem('vidUser'));
            user.todos.splice(index, 1);
            localStorage.setItem('vidUser', JSON.stringify(user));
            renderTodos(user.todos);
        }

        // --- 4. ELITE UPGRADE ---
        function activateElite() {
            const user = JSON.parse(localStorage.getItem('vidUser'));
            user.plan = 'Elite';
            localStorage.setItem('vidUser', JSON.stringify(user));
            alert("üéâ UPGRADE SUCCESSFUL!\nWelcome to Elite Membership.");
            loadDashboard(); // Refresh UI
        }

        // --- 5. AI LOGIC (GEMINI) ---
        async function sendAI() {
            const input = document.getElementById('ai-input');
            const txt = input.value;
            if(!txt) return;
            
            const box = document.getElementById('chat-box');
            box.innerHTML += `<div class="msg user">${txt}</div>`;
            input.value = "Thinking...";
            input.disabled = true;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: "Answer shortly for a student: " + txt }] }] })
                });
                const data = await response.json();
                const reply = data.candidates[0].content.parts[0].text.replace(/\*\*/g, ''); // Simple bold remove
                box.innerHTML += `<div class="msg ai">${reply}</div>`;
            } catch(err) {
                box.innerHTML += `<div class="msg ai" style="color:red">Error connecting to AI.</div>`;
            }

            input.value = "";
            input.disabled = false;
            box.scrollTop = box.scrollHeight;
        }

        // --- 6. TOOL MODAL LOGIC (15 FEATURES) ---
        function openTool(type) {
            const modal = document.getElementById('tool-modal');
            const title = document.getElementById('modal-title');
            const body = document.getElementById('modal-body');
            modal.classList.remove('hidden');

            if(type === 'calc') {
                title.innerText = "Calculator";
                body.innerHTML = `
                    <input type="text" id="c-disp" readonly style="text-align:right; font-size:1.5rem; margin-bottom:10px;">
                    <div class="calc-grid">
                        <button class="calc-btn" onclick="cApp('7')">7</button><button class="calc-btn" onclick="cApp('8')">8</button><button class="calc-btn" onclick="cApp('9')">9</button><button class="calc-btn op" onclick="cApp('/')">/</button>
                        <button class="calc-btn" onclick="cApp('4')">4</button><button class="calc-btn" onclick="cApp('5')">5</button><button class="calc-btn" onclick="cApp('6')">6</button><button class="calc-btn op" onclick="cApp('*')">*</button>
                        <button class="calc-btn" onclick="cApp('1')">1</button><button class="calc-btn" onclick="cApp('2')">2</button><button class="calc-btn" onclick="cApp('3')">3</button><button class="calc-btn op" onclick="cApp('-')">-</button>
                        <button class="calc-btn" onclick="cApp('0')">0</button><button class="calc-btn" onclick="document.getElementById('c-disp').value=''">C</button><button class="calc-btn op" onclick="cSolve()">=</button><button class="calc-btn op" onclick="cApp('+')">+</button>
                    </div>`;
            }
            else if (type === 'pomodoro') {
                title.innerText = "Pomodoro Timer";
                body.innerHTML = `<h1 id="pomo-time">25:00</h1><button class="btn btn-primary" onclick="startPomo()">Start</button>`;
            }
            else if (type === 'bmi') {
                title.innerText = "BMI Calculator";
                body.innerHTML = `<input id="bmi-w" placeholder="Weight (kg)"><input id="bmi-h" placeholder="Height (cm)"><button class="btn btn-primary" onclick="calcBMI()">Calculate</button><p id="bmi-res" style="margin-top:10px; font-weight:bold;"></p>`;
            }
            else if (type === 'passgen') {
                title.innerText = "Password Generator";
                body.innerHTML = `<button class="btn btn-primary" onclick="document.getElementById('p-res').innerText = Math.random().toString(36).slice(-10)">Generate</button><h3 id="p-res" style="margin-top:10px; font-family:monospace;"></h3>`;
            }
            else if (type === 'coin') {
                title.innerText = "Coin Toss";
                body.innerHTML = `<button class="btn btn-primary" onclick="document.getElementById('coin-res').innerText = Math.random() > 0.5 ? 'HEADS' : 'TAILS'">FLIP</button><h2 id="coin-res" style="margin-top:15px;">?</h2>`;
            }
            else if (type === 'dice') {
                title.innerText = "Roll Dice";
                body.innerHTML = `<button class="btn btn-primary" onclick="document.getElementById('dice-res').innerText = Math.floor(Math.random()*6)+1">ROLL</button><h2 id="dice-res" style="margin-top:15px; font-size:3rem;">üé≤</h2>`;
            }
            else if (type === 'breathing') {
                title.innerText = "Breathing Exercise";
                body.innerHTML = `<div style="width:100px; height:100px; background:var(--accent); border-radius:50%; margin:0 auto; animation: breathe 4s infinite;"></div><p>Breathe In... Breathe Out...</p><style>@keyframes breathe { 0%{transform:scale(0.8)} 50%{transform:scale(1.2)} 100%{transform:scale(0.8)} }</style>`;
            }
            else if (type === 'quote') {
                const quotes = ["Believe you can.", "Study hard.", "Dream big."];
                title.innerText = "Daily Quote";
                body.innerHTML = `<h3>"${quotes[Math.floor(Math.random()*quotes.length)]}"</h3>`;
            }
            else if (type === 'tts') {
                title.innerText = "Text to Speech";
                body.innerHTML = `<input id="tts-in" placeholder="Type something..."><button class="btn btn-primary" onclick="window.speechSynthesis.speak(new SpeechSynthesisUtterance(document.getElementById('tts-in').value))">Speak</button>`;
            }
            else if (type === 'notes') {
                title.innerText = "Quick Notes";
                body.innerHTML = `<textarea id="q-note" rows="5" placeholder="Type here..."></textarea><button class="btn btn-primary" onclick="alert('Note Saved to Browser Memory!')">Save</button>`;
            }
            else if (type === 'flashcard') {
                title.innerText = "Math Flashcard";
                body.innerHTML = `<div class="card" onclick="this.innerText = this.innerText=='œÄ' ? '3.14' : 'œÄ'" style="font-size:3rem; cursor:pointer;">œÄ</div><p>Click to flip</p>`;
            }
            else if (type === 'stopwatch') {
                 title.innerText = "Stopwatch (Simple)";
                 body.innerHTML = `<h2 id="sw-time">0</h2><button class="btn btn-primary" onclick="window.sw = setInterval(()=>document.getElementById('sw-time').innerText++, 1000)">Start</button> <button class="btn btn-danger" onclick="clearInterval(window.sw)">Stop</button>`;
            }
            else if (type === 'converter') {
                title.innerText = "Km to Miles";
                body.innerHTML = `<input id="cv-in" type="number" oninput="document.getElementById('cv-out').innerText = (this.value * 0.621).toFixed(2) + ' miles'"><h3 id="cv-out">0 miles</h3>`;
            }
            else if (type === 'counter') {
                title.innerText = "Word Counter";
                body.innerHTML = `<textarea oninput="document.getElementById('wc-res').innerText = this.value.split(' ').length + ' words'"></textarea><p id="wc-res">0 words</p>`;
            }
            else if (type === 'bg') {
                title.innerText = "Color Picker";
                body.innerHTML = `<input type="color" oninput="document.body.style.backgroundColor = this.value">`;
            }
        }

        function closeTool() {
            document.getElementById('tool-modal').classList.add('hidden');
        }

        // Calculator Helpers
        let cExp = "";
        function cApp(v) { cExp += v; document.getElementById('c-disp').value = cExp; }
        function cSolve() { try { document.getElementById('c-disp').value = eval(cExp); cExp=""; } catch { alert("Error"); } }

        // BMI Helper
        function calcBMI() {
            const w = document.getElementById('bmi-w').value;
            const h = document.getElementById('bmi-h').value / 100;
            const bmi = (w / (h*h)).toFixed(1);
            document.getElementById('bmi-res').innerText = `Your BMI: ${bmi}`;
        }

        // Pomodoro Helper
        function startPomo() {
            let m = 24, s = 59;
            const el = document.getElementById('pomo-time');
            setInterval(() => {
                if(s==0) { m--; s=59; } else s--;
                el.innerText = `${m}:${s<10?'0'+s:s}`;
            }, 1000);
        }

        // On Load Check
        if(localStorage.getItem('vidUser')) loadDashboard();
    </script>
</body>
</html>